<!--
Copyright (c) 2025 Hugo Monteiro
Licensed under the MIT License. See LICENSE file in the project root for license information.
-->
<Window x:Class="StockTicker.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="BitTicker" Height="60" Width="800"
        WindowStyle="None" AllowsTransparency="True"
        Background="#1E1E1E" Topmost="True"
        ResizeMode="CanResizeWithGrip"
        MinWidth="200" MinHeight="40"
        LocationChanged="Window_LocationChanged"
        SizeChanged="Window_SizeChanged"
        MouseEnter="Window_MouseEnter"
        MouseLeave="Window_MouseLeave">
    
    <Window.ContextMenu>
        <ContextMenu Background="#2D2D2D" Foreground="White">
            <MenuItem Header="Refresh" Click="Refresh_Click"/>
            <Separator/>
            <MenuItem Header="Configure" Click="Configure_Click"/>
            <MenuItem Header="Show Logs" Click="ShowLogs_Click"/>
            <Separator/>
            <MenuItem Header="About" Click="About_Click"/>
            <Separator/>
            <MenuItem Header="Exit" Click="Exit_Click"/>
        </ContextMenu>
    </Window.ContextMenu>
    
    <Border BorderBrush="#333333" BorderThickness="1" CornerRadius="3"
            MouseEnter="Border_MouseEnter"
            MouseLeave="Border_MouseLeave">
        <Grid>
            <ScrollViewer x:Name="MainScrollViewer" 
                          HorizontalScrollBarVisibility="Hidden" 
                          VerticalScrollBarVisibility="Hidden"
                          ScrollChanged="ScrollViewer_ScrollChanged">
                <ItemsControl x:Name="CryptoItemsControl" 
                              ItemsSource="{Binding DisplayedCryptos}"
                              SizeChanged="ItemsControl_SizeChanged"
                              PreviewMouseLeftButtonDown="CryptoItemsControl_PreviewMouseLeftButtonDown">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Margin="5,0" Padding="10,5"
                                    ToolTipService.InitialShowDelay="500"
                                    ToolTipService.ShowDuration="10000"
                                    ToolTipService.BetweenShowDelay="1000">
                                <Border.ToolTip>
                                    <ToolTip Background="#2D2D2D" 
                                             BorderBrush="#555555" 
                                             BorderThickness="1"
                                             Foreground="White"
                                             FontFamily="Consolas, Courier New"
                                             FontSize="11"
                                             Padding="8">
                                        <TextBlock Text="{Binding TooltipData}" 
                                                   TextWrapping="NoWrap"/>
                                    </ToolTip>
                                </Border.ToolTip>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Symbol}" 
                                              Foreground="White" 
                                              FontWeight="Bold" 
                                              FontSize="12"
                                              Margin="0,0,5,0"/>
                                    <TextBlock Text="{Binding DisplayPrice}" 
                                              Foreground="{Binding PriceColor}" 
                                              FontSize="12"
                                              Margin="0,0,5,0"/>
                                    <TextBlock Text="{Binding DisplayChangePercent}" 
                                              Foreground="{Binding PriceColor}" 
                                              FontSize="11"
                                              Margin="5,0,0,0"/>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
            
            <!-- Resize grip -->
            <Grid HorizontalAlignment="Right" VerticalAlignment="Bottom" Width="10" Height="10"
                  PreviewMouseLeftButtonDown="ResizeGrip_PreviewMouseLeftButtonDown">
                <Path Data="M 0,10 L 10,0 M 3,10 L 10,3 M 6,10 L 10,6" 
                      Stroke="#666666" StrokeThickness="1"/>
            </Grid>
        </Grid>
    </Border>
</Window>
